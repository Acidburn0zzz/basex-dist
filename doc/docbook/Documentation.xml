<?xml version="1.0" encoding="UTF-8"?>
<article>
  <title>BaseX - Full Documentation</title>
  <articleinfo>
    <date>July 23 2009</date>
    <author>
      <surname>BaseX Team</surname>
    </author>
    <copyright>
      <year>2005-09</year>
      <holder>DBIS, University of Konstanz</holder>
    </copyright>
  </articleinfo>
  <sect1>
    <title>Introduction</title>
    <para>BaseX is a native, open-source XML database and efficient 
    XPath/XQuery Full Text processor. It supports very large XML 
    instances and offers a visual, interactive frontend. BaseX is 
    written in Java and freely available for download. It is developed 
    by the Database and Information Systems Group at the University of 
    Konstanz.</para>
    <sect2>
      <title>Prerequisites</title>
      <sect3>
        <title>Operating System</title>
        <para>BaseX was tested on the following platforms:</para>
        <itemizedlist>
          <listitem>
            <para>Windows 2000, XP, Vista, 7</para>
          </listitem>
          <listitem>Linux: Debian/Ubuntu, SuSE, Redhat</listitem>
          <listitem>Max OS X (10.4+)</listitem>
          <listitem>OpenBSD (4.3)</listitem>
        </itemizedlist>
        <para>Every other platform with a Java VM should be able to run 
        BaseX.</para>
      </sect3>
      <sect3>
        <title>Software</title>
        <para>To run any version of BaseX, you need version 1.5 or 
        later of the Java runtime environment (JRE) or development kit 
        (JDK).</para>
        <para>The latest version of Java can be downloaded at 
        <ulink url="http://www.java.com">www.java.com</ulink> or 
        <ulink url="http://java.sun.com">java.sun.com</ulink>.</para>
      </sect3>
      <sect3>
        <title>Hardware</title>
        <para>

          BaseX works with very limited resources (400 MHz, 64 MB RAM). 
          To work with larger databases, however, you might benefit 
          from more RAM. If you encounter main memory limits, there are 
          several things you can try:
          <itemizedlist>
            <listitem>Increase <ulink url="#XXX">Java&apos;s virtual memory</ulink></listitem>
            <listitem>Switch off <ulink url="#XXX">database indexes</ulink></listitem>
            <listitem>Use BaseX&apos;s <ulink url="#XXX">internal XML parser</ulink></listitem>
          </itemizedlist>

        </para>
      </sect3>
    </sect2>
    <sect2>
      <title>Installation</title>
      <para>BaseX works without any installation. The following files 
      can be 
      <ulink url="http://www.inf.uni-konstanz.de/dbis/basex/download.php"> downloaded</ulink> from the homepage:</para>
      <itemizedlist>
        <listitem><emphasis>BaseX.jar</emphasis>: simple JAR file</listitem>
        <listitem><emphasis>BaseX.exe</emphasis>: a JAR file, which is wrapped into a Windows executable</listitem>
        <listitem><emphasis>BaseX-XQJ.jar</emphasis>: <ulink url="#"> XQuery for Java</ulink> Database API</listitem>
        <listitem><emphasis>BaseX-XMLDB.jar</emphasis>: <ulink url="#"> XML:DB</ulink> Database API</listitem>
        <listitem><emphasis>BaseX-Complete.zip</emphasis>: JAR files, sources, documentation and files to build the project</listitem>
      </itemizedlist>
      <para>The JAR file and the Windows executable can be launched 
      with a simple double-click. The &quot;Complete&quot; package 
      contains the following files and directories (selection):</para>
      <blockquote>
        <para><emphasis>Project Directory</emphasis></para>
        <programlisting>doc              Project documentation
etc              Various files for project handling
src              Project sources
.project         <ulink url="http://www.eclipse.org/">Eclipse</ulink> project file
makefile         Linux <ulink url="http://en.wikipedia.org/wiki/Make_(software)">Makefile</ulink>
BaseX.jar        Public JAR file
license.txt      Licensing Information
readme.txt       Project Information
build.xml        <ulink url="http://ant.apache.org/">Ant</ulink> Build file
input.xml        XML sample document</programlisting>
      </blockquote>
      <para>In the <code>etc</code> folder, you find Linux scripts and 
      Windows batch files which can moved into your PATH environment to 
      speedup execution.</para>
    </sect2>
    <sect2>
      <title>Quick Start</title>
      <para>

        By double-clicking the JAR file, the graphical interface is 
        launched. If you start BaseX on the command line, or use the 
        scripts mentioned above, you have some more options:
        <blockquote>
          <para><emphasis>Console version</emphasis></para>
          <programlisting>java -cp BaseX.jar org.basex.BaseX</programlisting>
          <para><emphasis>Running the server and a client instance</emphasis></para>
          <programlisting>java -cp BaseX.jar org.basex.BaseXServer
java -cp BaseX.jar org.basex.BaseXClient</programlisting>
          <para><emphasis>GUI version (granting more memory)</emphasis></para>
          <programlisting>java -Xmx512m -jar BaseX.jar</programlisting>
        </blockquote>

      </para>
    </sect2>
    <sect2>
      <info>
        <title>Starting with BaseX GUI</title>
      </info>
      <para>Just download the BaseX.jar or BaseX.exe to start the GUI 
      Version of BaseX. If you download the source, you have to start 
      the BaseXWin.java class.</para>
      <sect3>
      	<info>
      		<title>First steps with the GUI</title>
      		</info>
      		<para>When you start BaseX the first time there isnt a database. So you have to create your own one.
      			Go to the file menu or click the icon for creating a new database.
      			Here you can select the input file or directory for you database. When choosing a directory, all xml files
      			in this directory will be included in your database. So you can easily get a database over a huge amount
      			of xml files.
      			Give your database a name and check the options in parsing, indexes and full-text which 
      			you want to use for your database. After creating the database it will be opened in BaseX.
      			Now you can explore and edit the data in different views. To open or create a other database just click
      			the file menu or the icons in the menu bar.
      			For creating a database from a filesystem go to menu, import filesystem and check all options you want to use
      			for your database.
      			If you are creating a database with a name which already exists, it will override the old database. You can find more
      			information in the <link linkend="gui"><emphasis>Working with the BaseX GUI</emphasis></link> chapter.
      			</para>
      </sect3>
    </sect2>
    <sect2>
      <info>
        <title>Starting with BaseX Console</title>
      </info>
      <para>Just enter java -cp BaseX.jar org.base.BaseX on the command 
      line. The Java option -Xmx... reserve more memory, and the -h 
      flag of BaseX lists all available flags.</para>
      <sect3>
      	<info>
      		<title>First steps with the console</title>
      	</info>
      		<para>When starting with the console you need to know the different commands to 
      			work with BaseX. You can find the commands in the command section in this documentation.
      			First of all you need to create a db. You can do it on this way. Just type:
      			<emphasis>create db factbook.xml factbook</emphasis>, if the file factbook.xml is in the right
      			folder the database will be created shortly. Otherwise there is an error message in which you can
      			see where to copy the xml file. You can find more information in the <link linkend="console"><emphasis>Working with the BaseX Console</emphasis></link>
      			 chapter.
      			</para>
      </sect3>
    </sect2>
    <sect2>
      <info>
        <title>Using BaseX as Server-Client</title>
      </info>
      <para>Start the BaseXServer.java class and the Server is running. 
      Now you can connect with BaseXClient.java.</para>
      <itemizedlist>
        <listitem>
          <para>To start BaseX in server mode, type in: java -cp 
          BaseX.jar org.basex.BaseXServer
          You can start the server with different options. To 
          see all options just start BaseXServer -h.</para>
        </listitem>
        <listitem>
          <para>To run a BaseX client, please type in: java -cp 
          BaseX.jar org.basex.BaseXClient -s server.org</para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2>
      <info>
        <title>Starting BaseX as a service</title>
      </info>
      <para/>
    </sect2>
  </sect1>
  <sect1 id="console">
    <info>
      <title>Working with the BaseX Console</title>
    </info>
    <sect2>
      <info>
        <title>Launching BaseX in console mode</title>
      </info>
      <para>Enter java -cp BaseX.jar org.basex.BaseX -h to get all 
      available flags.</para>
      <programlisting>BaseX 5.6; DBIS, University of Konstanz
Usage: BaseX [options] [query]
  [query]    specify query file
  -c         chop whitespaces
  -d         debug mode
  -e         skip entity parsing
  -o [file]  specify output file
  -q &lt;cmd&gt;   send BaseX commands
  -v/V       show (all) process info
  -x         print result as xml
  -z         skip query output </programlisting>
    </sect2>
    <sect2>
      <info>
        <title>What can I do in the console mode?</title>
      </info>
      <para>Type in &quot;help&quot; to get a list of all BaseX 
      commands. Several commands can be separated by semicolons. To 
      evaluate commands without entering the console mode, you can use 
      the -q option on the command line. See the following 
      example.</para>
      <programlisting>java -Xmx512m -cp BaseX.jar org.basex.BaseX
  -vq &quot;create xml input.xml; xquery /&quot;

Database &apos;input&apos; created in 155.17 ms.

Parsing   : 110.35 ms
Compiling : 0.81 ms
Evaluating: 0.05 ms
Printing  : 2.06 ms
Total Time: 113.35 ms
Results   : 1 Item
Printed   : 360 Bytes</programlisting>
    </sect2>
    <sect2>
      <info>
        <title>Description of the Console Features</title>
      </info>
      <para>You can type in help in the console to get a list of all 
      BaseX commands. Several commands can be separated by semicolons. 
      To evaluate commands without entering the console mode, you can 
      use the -q option on the command line</para>
      <sect3>
        <info>
          <title>Database Commands</title>
        </info>
        <para>

          <itemizedlist>
            <listitem>
              <para>Create (create [DB|FS|INDEX] [...]): Creates 
              database from XML or filesystem, or creates index</para>
              <para>Example: create DB factbook.xml factbook</para>
            </listitem>
            <listitem>
              <para>Open (open [database]): Opens the specified 
              [database].</para>
            </listitem>
            <listitem>
              <para>Info (info [DB|INDEX|TABLE]?): Shows information on 
              the currently opened database.</para>
            </listitem>
            <listitem>
              <para>Close (close): Closes the current database.</para>
            </listitem>
            <listitem>
              <para>List (list): Lists all available databases.</para>
            </listitem>
            <listitem>
              <para>Drop (drop [DB|INDEX] [...] ): Drops a database or 
              an index.</para>
            </listitem>
            <listitem>
              <para>Export (export [file]): Exports the current context 
              set to an XML [file].</para>
            </listitem>
            <listitem>
              <para>Optimize (optimize): Optimizes the current database 
              structures.</para>
            </listitem>
          </itemizedlist>

        </para>
      </sect3>
      <sect3>
        <info>
          <title>Query Commands</title>
        </info>
        <para>

          <itemizedlist>
            <listitem>
              <para>XQuery (xquery [query]): Evaluates an XQuery and 
              prints the result.</para>
              <para>Example: xquery for $i in (1,2,3) return $i</para>
            </listitem>
            <listitem>
              <para>Find (find [query]): Evaluate a simple keyword 
              [query] and print its results. This command is used in 
              the simple search mode in the GUI.</para>
            </listitem>
            <listitem>
              <para>CS (cs [query]): Evaluates the specified XPath 
              [query] and set the result as new context set.</para>
            </listitem>
          </itemizedlist>

        </para>
      </sect3>
      <sect3>
        <info>
          <title>Update Commands</title>
        </info>
        <para>

          <itemizedlist>
            <listitem>
              <para>Copy (copy [pos] [source] [target]): Copy database 
              nodes. Evaluates the [source] query and copies the 
              resulting nodes as child nodes into the [target] query. 
              [pos] specifies the child position; if 0 is specified, 
              the nodes are inserted as last child. The queries should 
              be enclosed by brackets.</para>
            </listitem>
            <listitem>
              <para>Delete (delete [&quot;target&quot;]): Delete 
              database nodes resulting from the specified [target] 
              query. The query should be enclosed by brackets.</para>
              <para>Example: delete //*</para>
            </listitem>
            <listitem>
              <para>Insert (insert 
              [fragment|element|attribute|text|comment|pi] [...]): 
              Insert database nodes. Insert a fragment or a specific 
              node at the specified child [pos] of the specified 
              [target] query.</para>
              <para>Example: insert element test 0 //*</para>
            </listitem>
            <listitem>
              <para>Update (update [element|attribute|text|comment|pi] 
              [...]): Update database nodes satisfying the specified 
              [target] query.</para>
            </listitem>
          </itemizedlist>

        </para>
      </sect3>
      <sect3>
        <info>
          <title>General Commands</title>
        </info>
        <para>

          <itemizedlist>
            <listitem>
              <para>Help (help [command]): Get help on BaseX commands. 
              If [command] is specified, information on the specific 
              command is printed; otherwise, all commands are listed. 
              If &apos;all&apos; is specified, hidden commands are 
              included.</para>
            </listitem>
            <listitem>
              <para>Set (set [option] [value?]): Sets global options. 
              The currently set values can be shown with the info 
              command.</para>
            </listitem>
            <listitem>
              <para>Exit (exit/quit): Leave the console mode of 
              BaseX.</para>
            </listitem>
          </itemizedlist>

        </para>
      </sect3>
    </sect2>
  </sect1>
  <sect1 id="gui">
    <info>
      <title>Working with the BaseX GUI</title>
    </info>
    <sect2>
      <info>
        <title>Description of all the Views in the GUI</title>
      </info>
      <para>

        <itemizedlist>
          <listitem>
            <para>Text View: Displays query results and other textual 
            output.</para>
          </listitem>
          <listitem>
            <para>Map View: This visualization represents all data in a 
            TreeMap. All nodes of the XML document are represented as 
            rectangles, filling the complete area. You can choose in 
            the Menu Options/Map Layout the different Algorithms: 
            Split, Strip, Squarified and Slice and Dice Layout.</para>
          </listitem>
          <listitem>
            <para>Folder View: This visualization displays all XML 
            nodes in a usual tree view.</para>
          </listitem>
          <listitem>
            <para>Table View: This visualization displays all XML nodes 
            in a table with rows and columns.</para>
          </listitem>
          <listitem>
            <para>Scatterplot View: This visualizations displays all 
            XML nodes in a scatterplot.</para>
          </listitem>
        </itemizedlist>

      </para>
    </sect2>
    <sect2>
      <info>
        <title>Description of the GUI Features</title>
      </info>
      <sect3>
        <info>
          <title>What does the Filter button exactly do?</title>
        </info>
        <para>After pressing this button, the visualizations display 
        the previously highlighted XML nodes, omitting all the other 
        nodes of the document. If realtime filtering is enabled, the 
        Filter button will be disabled, and all results are 
        automatically filtered.</para>
      </sect3>
      <sect3>
        <info>
          <title>What is Realtime Filtering?</title>
        </info>
        <para>If realtime filtering is enabled, all visualizations 
        directly show the query results while entering the query. If 
        this feature is disabled, the query results are highlighted in 
        the visualizations and can be ecplicitly filtered using the 
        &apos;Filter&apos; button.</para>
      </sect3>
      <sect3>
        <info>
          <title>How can I search without XQuery?</title>
        </info>
        <para>The Search field triggers a simple search query in the 
        XML document. The following syntax is supported:</para>
        <programlisting>Query   Description
foo  Find tags and texts containing foo
=foo  Find exact matching text nodes
@foo  Find attributes and attribute values
@=foo  Find exact attribute values</programlisting>
      </sect3>
      <sect3>
        <info>
          <title>The search field in the query panel and the search field right beyond the buttons, do they differ?</title>
        </info>
        <para>Not really, both offer the same functionality, but in the 
        query panel there is a dropdown menu where it is possible to 
        choose tags or attributes of the XML document.</para>
      </sect3>
      <sect3>
        <info>
          <title>How can I configure the look and feel of BaseX?</title>
        </info>
        <para>All panels are freely adjust- and dragable. Changing of 
        colors, fonts and the layout is possible via the 
        &apos;Layout&apos; entry in the &apos;Options&apos; menu.</para>
      </sect3>
      <sect3>
        <info>
          <title>What is the Main-Memory Mode?</title>
        </info>
        <para>The Main-Memory Mode speeds up querying but disables 
        updates. The table data is kept in memory and the text of a 
        document is still accessed from disk.</para>
      </sect3>
      <sect3>
        <info>
          <title>How can I import my file system? What does that mean?</title>
        </info>
        <para>To import a file system, go to &apos;File/Import 
        Filesystem...&apos;. You will be prompted for the next steps. A 
        file hierarchy traversal is performed and the directory 
        structure of the filesystem is mapped into an XML 
        representation. Additionally some metadata is extracted from 
        some known file types. What you get is an &apos;XML view&apos; 
        of your current file system. You can query the filesystem just 
        as any other database instance. Manipulation (update, deletion) 
        of the XML database instance representing a file hierarchy has 
        no effect on the real filesystem.</para>
      </sect3>
      <sect3>
        <info>
          <title>How can I import my data aka how do I create a new database instance aka how to shred an XML file?</title>
        </info>
        <para>There are 2 ways:</para>
        <itemizedlist>
          <listitem>
            <para>If your input data is an XML file, you can use the 
            &apos;New&apos; command. BaseX will create a new database 
            with the name of your XML file. (GUI only)</para>
          </listitem>
          <listitem>
            <para>You can use the create command. (GUI and 
            console)</para>
          </listitem>
        </itemizedlist>
      </sect3>
    </sect2>
  </sect1>
  <sect1>
    <info>
      <title>General Information</title>
    </info>
    <sect2>
      <info>
        <title>Location of BaseX Files</title>
      </info>
      <para>The databases are stored in a BaseXData directory in your 
      home directory. The path can be changed in the GUI via the 
      Options/Preferences menu. The two configuration files 
      .basex/.basewin are stored in the same directory. This path 
      cannot be changed by the user.</para>
    </sect2>
    <sect2>
      <info>
        <title>How do you measure the performance of the queries?</title>
      </info>
      <para>The measurements include parsing, compilation, evaluation 
      and printing time of a query. There are different ways to 
      retrieve the performance info:</para>
      <itemizedlist>
        <listitem>
          <para>Console: use &quot;-v&quot; flag as command line 
          argument</para>
        </listitem>
        <listitem>
          <para>Console Mode: enter set info or set info all in the 
          console mode</para>
        </listitem>
        <listitem>
          <para>GUI Mode: display performance results in the QueryInfo 
          view</para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2>
      <info>
        <title>What indexing techniques are available and what do they do?</title>
      </info>
      <para>Indexes can speedup queries by magnitudes. Currently, three 
      indexes exist:</para>
      <itemizedlist>
        <listitem>
          <para>Text Index: All text nodes are indexed to speedup XPath 
          predicates.</para>
        </listitem>
        <listitem>
          <para>Attribute Value Index: All attributes are indexed to 
          speedup XPath predicates.</para>
        </listitem>
        <listitem>
          <para>Full-Text Index: A full-text index is created to 
          speedup content based queries in XPath.</para>
        </listitem>
      </itemizedlist>
      <para>Note that the indexes only speedup XPath and simple user 
      queries. The query processor will optimize queries completely 
      automatic whenever possible. Expect XQuery to make use of the 
      indexes in the next official release.</para>
    </sect2>
    <sect2>
      <info>
        <title>How can I create a Database for a couple of XML files?</title>
      </info>
      <para>There are 2 ways to do this:</para>
      <itemizedlist>
        <listitem>
          <para>GUI Mode: Open the GUI, choose File -&gt; New -&gt; 
          Browse -&gt; (choose directory)</para>
        </listitem>
        <listitem>
          <para>Console Mode: java -cp BaseX.jar org.basex.BaseX -q 
          &quot;set chop; create db /path/to/collection 
          dbname&quot;</para>
        </listitem>
      </itemizedlist>
      <para>Next, you can open a collection and run an XQuery as 
      follows: for $doc in collection(&quot;dbname&quot;) return 
      ....</para>
    </sect2>
    <sect2>
      <info>
        <title>Is there a way to save large results of a query in a file?</title>
      </info>
      <para>The best way to save large results is to work on the 
      command line and use the &quot;-o&quot; flag, as shown 
      below:</para>
      <programlisting>sample.xq: for $node in doc(&apos;dbname&apos;)//etc return $node/something
BaseX-Command:
java -cp BaseX.jar org.basex.BaseX -o result.xml sample.xq</programlisting>
    </sect2>
  </sect1>
  <sect1>
    <info>
      <title>Description of BaseX-Features</title>
    </info>
    <sect2>
      <info>
        <title>XQuery Implementation</title>
      </info>
      <para>All XPath optimizations are integrated in XQuery and the 
      XPath implementation was obsolete and so it was replaced by 
      XQuery. As XPath is a subset of XQuery, you will not actually 
      notice many differences, but XQuery directly allows to work with 
      several databases/documents, so you will not have to manually 
      change the Context references. A query like...</para>
      <programlisting>for $n in 1 to 10
for $doc in doc( concat(&apos;document&apos;, $n) )
return $doc//any/path/etc </programlisting>
      <para>could then be used to access several databases in one 
      query. You can just type all your XPath queries in the XQuery 
      textfield.</para>
    </sect2>
    <sect2>
      <info>
        <title>XQuery Full-Text Implementation</title>
      </info>
      <para>The full-text features can be used in XPath as well as in 
      XQuery. Again, queries will be evaluated much faster in XPath, 
      and XQuery covers more features of the language specification. 
      The following example queries are based on the W3C Use 
      Cases:</para>
      <programlisting>Return all title tags which contain the word &apos;Usability&apos;
//title[text() ftcontains &apos;Usability&apos;] 

Return all authors, containing &apos;Marigold&apos;
for    $i in //author score $s
where  $i/text() ftcontains &apos;Marigold&apos;
return &lt;hit score=&quot;{ $s }&quot;&gt;{ $i/text() }&lt;/hit&gt;</programlisting>
    </sect2>
    <sect2>
      <info>
        <title>Description of the Indexes</title>
      </info>
      <para>Text indexes allow a speedup of order of magnitudes for 
      text-based queries. Here are some examples for queries which are 
      rewritten for index access:</para>
      <programlisting>Text-Based Queries:</programlisting>
      <itemizedlist>
        <listitem>
          <para>//node()[text() = &apos;Usability&apos;]</para>
        </listitem>
        <listitem>
          <para>//div[p = &apos;Usability&apos; or p = 
          &apos;Testing&apos;]</para>
        </listitem>
        <listitem>
          <para>path/to/relevant[text() = &apos;Usability 
          Testing&apos;]/and/so/on</para>
        </listitem>
      </itemizedlist>
      <programlisting>Attribute Index:</programlisting>
      <itemizedlist>
        <listitem>
          <para>//node()[@align = &apos;right&apos;]</para>
        </listitem>
        <listitem>
          <para>descendant::elem[@id = &apos;1&apos;]</para>
        </listitem>
        <listitem>
          <para>range/query[@id &lt;= 5]</para>
        </listitem>
      </itemizedlist>
      <programlisting>Full-Text Index:</programlisting>
      <itemizedlist>
        <listitem>
          <para>//node[text() ftcontains &apos;Usability&apos;]</para>
        </listitem>
        <listitem>
          <para>//node[text() ftcontains &apos;Usebiliti&apos; with 
          fuzzy]</para>
        </listitem>
        <listitem>
          <para>//book[chapter ftcontains (&apos;web&apos; ftor 
          &apos;WWW&apos; without stemming) ftand &apos;diversity&apos; 
          case sensitive with stemming distance at most 5 words]</para>
        </listitem>
      </itemizedlist>
      <para>The full-text index is optimized to support all full-text 
      features of the XQuery Full-Text recommendation. BaseX extends 
      the specification by offering a fuzzy match option. Fuzzy search 
      is based on the Levenshtein algorithm; the longer query terms 
      are, the more errors will be tolerated. Default &quot;Case 
      Sensitivity&quot;, &quot;Stemming&quot; and 
      &quot;Diacritics&quot; options will be considered in the index 
      creation. Consequently, all queries will be sped up which use the 
      default index options.</para>
    </sect2>
    <sect2>
      <info>
        <title>What about the different indexes BaseX offers: which data structures are applied?</title>
      </info>
      <itemizedlist>
        <listitem>
          <para>Text Index: B-Tree: Both the text and attribute index 
          are based on a B-Tree and support fast exact and range 
          queries.</para>
        </listitem>
        <listitem>
          <para>Full-Text Index (Fuzzy Version): The standard full-text 
          Index is implemented as sorted array structure. It is 
          optimized for simple and fuzzy searches.</para>
        </listitem>
        <listitem>
          <para>Full-Text Index (Trie Version): A second full-text 
          Index is implemented as a compressed trie. Its needs slightly 
          more memory than the standard full-text index, but it 
          supports more features, such as full wildcard search.</para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2>
      <info>
        <title>Do you support XML Updates?</title>
      </info>
      <para>BaseX provides internal commands to perform updates on XML 
      (see also BaseX Commands). Moreover, the GUI provides a 
      convenient way to perform updates on the data.</para>
    </sect2>
    <sect2>
      <info>
        <title>What can I do if I get Exceptions on huge XML files as input?</title>
      </info>
      <para>You can try to use the internal XML parser of BaseX instead 
      of Java&apos;s own XML parser. To do this there are 2 ways: 
      Moreover, the GUI provides a convenient way to perform updates on 
      the data.</para>
      <itemizedlist>
        <listitem>
          <para>Console Mode: basex -q &quot;set intparse; ... create 
          db ...&quot;</para>
        </listitem>
        <listitem>
          <para>GUI Mode: File -&gt; New -&gt; Parsing -&gt; Use 
          internal XML parser</para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2>
      <info>
        <title>Can I protect a DB in BaseX with a password?</title>
      </info>
      <para>No, there is no password protection inside the BaseX 
      architecture - but (at least in Linux) you can restrict the BaseX 
      database directory to a specific user or group. Moreover, the GUI 
      provides a convenient way to perform updates on the data.</para>
    </sect2>
  </sect1>
  <sect1>
    <info>
      <title>Developer&apos;s Guide</title>
    </info>
    <sect2>
      <info>
        <title>Programming with BaseX API</title>
      </info>
      <para>This section decribes how to implement own applications 
      using the BaseX API. So you can easily develop and expand BaseX 
      with your own ideas and to your own needs.</para>
      <sect3>
      	<info>
      		<title>Introduction</title>
      	</info>
      	<para>There are some classes you need to know when working with the BaseX
      		source code:
      	</para>
      	<itemizedlist>
      		<listitem><para>Context.java (Package: org.basex.core): This class stores the reference to the currently opened database.
					Moreover, it provides references to the currently used, marked and copied node sets.</para></listitem>
      		<listitem><para>Prop.java (Package: org.basex.core): Here all global Properties will be set.
      		You can get them in a static way or over a own initialized context like <emphasis>context.prop.get(Prop.HOST);</emphasis>. They
					are initially read from and finally written to disk.</para></listitem>
      		<listitem><para>Text.java (Package: org.basex): This class contains internationalized text strings, which are used throughout the project. If this class is called first, the Strings
      		 are initialized by the {@link org.basex.core.Lang} class.</para></listitem>
      		<listitem><para>QueryProcessor.java (Package: org.basex.query): This abstract class contains various methods which allow querying in the database. A variety of hierarchical parsers (XPath, XQuery, etc..) 
      		can be implemented on top of this class.</para></listitem>
      	</itemizedlist>
      	<para>There are lots of examples in the test package, which you can use for your first steps.
      		 Next you can find a few instructions to start.</para>
      	</sect3>
      <sect3>
        <info>
          <title>Creating a Database</title>
        </info>
<para>
<programlisting><![CDATA[
import org.basex.core.*;
import org.basex.core.proc.*;
import org.basex.io.*;

/**
 * This class demonstrates how new are created and deleted.
 *
 * @author Workgroup DBIS, University of Konstanz 2005-09,
 * ISC License
 * @author BaseX Team
 */
public final class DBExample {
  /** Private constructor. */
  private DBExample() { }

  /**
   * Main method of the example class.
   * @param args (ignored) command-line arguments
   * @throws Exception exception
   */
  public static void main(final String[] args) throws Exception {
    // Creates a new database context, referencing the database.
    Context context = new Context();
    // Creates a standard output stream
    PrintOutput out = new PrintOutput(System.out);

    out.println("\n=== Create a database from a file:");

    // Sets an option: activates command info output
    new Set("Info", "on").execute(context, out);
    // Sets an option: chops whitespaces between text nodes
    // (saves disk space)
    new Set("Chop", "on").execute(context, out);
    // Creates a database from the specified file.
    new CreateDB("input.xml", "Example1").execute(context, out);

    out.println("\n=== Create a database from an input string:");

    // XML string.
    String xml = "<xml>This is a test</xml>";
    // Creates a database for the specified input.
    new CreateDB(xml, "Example2").execute(context, out);

    out.println("\n=== Open an existing database and
     show database info:");

    // Opens an existing database
    new Open("Example1").execute(context, out);
    // Dumps information on the specified database context
    new InfoDB().execute(context, out);

    out.println("=== Drop databases:");

    // Removes the first database
    new DropDB("Example1").execute(context, out);
    // Removes the second database
    new DropDB("Example2").execute(context, out);

    // Closes the output stream
    out.close();
    // Closes the database context
    context.close();
  }
}
]]>
</programlisting>
</para>
      </sect3>
      <sect3>
        <info>
          <title>Executing XQuery</title>
        </info>
<para>
<programlisting><![CDATA[
import org.basex.core.Context;
import org.basex.core.proc.*;
import org.basex.data.*;
import org.basex.io.*;
import org.basex.query.*;
import org.basex.query.item.Item;
import org.basex.query.iter.Iter;

/**
 * This class presents three alternatives to process XQuery
 * requests
 * with BaseX.
 *
 * @author Workgroup DBIS, University of Konstanz 2005-09,
 * ISC License
 * @author BaseX Team
 */
public final class XQueryExample {
  /** Sample query. */
  private static final String QUERY =
  		 "<xml>1 + 2 = { 1+2 }</xml>/text()";

  /** Private constructor. */
  private XQueryExample() { }

  /**
   * Main method of the example class.
   * @param args (ignored) command-line arguments
   * @throws Exception exception
   */
  public static void main(final String[] args) throws Exception {
    // Creates a database context
    Context context = new Context();
    // Creates a standard output stream
    PrintOutput out = new PrintOutput(System.out);

    out.println("=== First version: Creating a result instance");

    // Creates a query instance
    QueryProcessor processor = new QueryProcessor(QUERY, context);
    // Executes the query.
    Result result = processor.query();
    // Creates a result serializer
    XMLSerializer xml = new XMLSerializer(out);
    // Serializes the result
    result.serialize(xml);
    // Closes the serializer
    xml.close();
    // Closes the query processor
    processor.close();

    out.println("\n=== Second version: Iterating through all results");

    // Creates a query instance
    processor = new QueryProcessor(QUERY, context);
    // Returns a query iterator
    Iter iter = processor.iter();
    // Creates a result serializer
    xml = new XMLSerializer(out);
    // Uses an iterator to serialize the result
    for(Item item : iter) item.serialize(xml);
    // Closes the serializer
    xml.close();
    // Closes the query processor
    processor.close();

    out.println("\n=== Third version: Use the BaseX command");

    // Creates and executes a query
    new XQuery(QUERY).execute(context, out);

    // Closes the output stream
    out.close();
    // Closes the database
    context.close();
  }
}
]]>
</programlisting>
</para>
      </sect3>
      <sect3>
        <info>
          <title>Updating a Database</title>
        </info>
        <para>After you successfully created a Database you can update 
        and modify the data on the following ways:</para>
<para>
<programlisting><![CDATA[
import org.basex.core.*;
import org.basex.core.proc.*;
import org.basex.io.*;

/**
 * This class demonstrates how updates can be performed
 * on a database.
 *
 * @author Workgroup DBIS, University of Konstanz 2005-09,
 * ISC License
 * @author BaseX Team
 */
public final class UpdateExample {
  /** Private constructor. */
  private UpdateExample() { }

  /**
   * Main method of the example class.
   * @param args (ignored) command-line arguments
   * @throws Exception exception
   */
  public static void main(final String[] args) throws Exception {
    // Creates a new context
    Context context = new Context();
    // Creates a standard output stream
    PrintOutput out = new PrintOutput(System.out);

    out.println("\n=== Create a new database:");

    // Sets an option: activates command info output
    new Set("Info", "on").execute(context, out);
    // Creates a new database instance;
    // argument can be a file name or XML
    new CreateDB("<doc a='b'>first</doc>",
     			"Example").execute(context, out);

    out.println("\n=== Insert a document:");

    // Inserts a document into the database;
    // argument can be a file
    // name or XML
    // Position: 0 (ignored for documents)
    // Target: insert on root level
    new Insert("fragment", "<doc>second</doc>", "0",
     "/").execute(context, out);

    out.println("\n=== Delete nodes");

    // Deletes all attributes in the database.
    new Delete("//@*").execute(context, out);

    out.println("\n=== Insert a node:");

    // Inserts an element fragment into the database
    // Position: 1 = as first child
    // Target: insert after all /doc elements...
    new Insert("fragment", "<sub/>", "1",
    		 "/doc").execute(context, out);

    out.println("\n=== Optimize the database:");

    // Updates all indexes and database statistics
    new Optimize().execute(context, out);

    out.println("\n=== Output the result:");

    // Serializes the database to show the result
    new XQuery("/").execute(context, out);

    out.println("\n=== Drop the database:");

    // Removes the second database
    new DropDB("Example").execute(context, out);

    // Closes the output stream
    out.close();
    // Closes the database context
    context.close();
  }
}
]]>
</programlisting>
</para>
      </sect3>
    </sect2>
    <sect2>
      <info>
        <title>Programming with XML:DB API</title>
      </info>
      <para>This section decribes how to implement own applications 
      using the XML:DB API. These classes are predefined and help to 
      use every native XML Database with the same application 
      implemented with the XML:DB API.</para>
      <sect3>
        <info>
          <title>Executing XPath</title>
        </info>
<para>
<programlisting><![CDATA[
import org.xmldb.api.base.*;
import org.xmldb.api.modules.*;
import org.xmldb.api.*;

/**
 * This class serves an example for executing XPath requests
 * with the XML:DB API.
 *
 * @author Workgroup DBIS, University of Konstanz 2005-09,
 * ISC License
 * @author BaseX Team
 */
public final class XMLDBQuery {
  /** Database Driver. */
  private static final String DRIVER = 
  			"org.basex.api.xmldb.BXDatabase";
  /** Name of the referenced database. */
  private static final String DBNAME =
  "xmldb:basex://localhost:1984/input";
  /** Sample query. */
  private static final String QUERY = "//li";

  /**
   * Main method of the example class.
   * @param args (ignored) command-line arguments
   * @throws Exception exception
   */
  public static void main(final String[] args) throws Exception {
    Collection coll = null;
    try {
      Class<?> c = Class.forName(DRIVER);

      Database db = (Database) c.newInstance();
      // Registers the Database.
      DatabaseManager.registerDatabase(db);
      // Receives the Database.
      coll = DatabaseManager.getCollection(DBNAME);
      // Receives the XPathQueryService.
      XPathQueryService service = (XPathQueryService)
        coll.getService("XPathQueryService", "1.0");
      // Executes the query and receives all results.
      ResourceSet set = service.query(QUERY);
      // Iterator for ResultSets.
      ResourceIterator iter = set.getIterator();
      while(iter.hasMoreResources()) {
        // Receives the next results.
        Resource res = iter.nextResource();
        // Writing the result to the console.
        System.out.println((String) res.getContent());
      }
    } catch(XMLDBException e) {
      System.err.println("XML:DB Exception occured " + e.errorCode);
    } finally {
      if(coll != null) coll.close();
    }
  }
}
]]>
</programlisting>
</para>
        
      </sect3>
      <sect3>
        <info>
          <title>Inserting a XML Document</title>
        </info>
<para>
<programlisting><![CDATA[
import org.xmldb.api.base.*;
import org.xmldb.api.modules.*;
import org.xmldb.api.*;

/**
 * This class serves an example for inserting a XML Document
 * into a Databaseusing the XML:DB API.
 *
 * @author Workgroup DBIS, University of Konstanz 2005-09,
 * ISC License
 * @author BaseX Team
 */
public final class XMLDBInsert {
  /** Database Driver. */
  private static final String DRIVER = 
  			"org.basex.api.xmldb.BXDatabase";
  /** Name of the referenced database. */
  private static final String DBNAME = 
  "xmldb:basex://localhost:1984/input";

  /**
   * Main method of the example class.
   * @param args (ignored) command-line arguments
   * @throws Exception exception
   */
  public static void main(final String[] args) throws Exception {
    Collection col = null;
    try {
      Class<?> c = Class.forName(DRIVER);

      Database db = (Database) c.newInstance();
      // Registers the Database.
      DatabaseManager.registerDatabase(db);
      // Receives the Collection.
      col = DatabaseManager.getCollection(DBNAME);

      // ID for the new Document.
      String id = "SecondDoc";
      // Content of the new Document.
      String doc = "<xml>This is the second document.</xml>";
      // Creates a new XMLResource with the ID.
      XMLResource res = (XMLResource) col.createResource(id,
          XMLResource.RESOURCE_TYPE);
      // Sets the content of the XMLResource as the Document.
      res.setContent(doc);
      // Stores the Resource into the Database.
      col.storeResource(res);

    } catch(XMLDBException e) {
      System.err.println("XML:DB Exception occured " + e.errorCode);
      e.printStackTrace();
    } finally {
      if(col != null) col.close();
    }
  }
}
]]>
</programlisting>
</para>
      </sect3>
    </sect2>
    <sect2>
      <info>
        <title>Programming with XQuery API</title>
      </info>
      <para>This section describes how to implement own applications 
      using the XQuery API.</para>
      <sect3>
        <info>
          <title>Executing XQuery</title>
        </info>
<para>
<programlisting><![CDATA[
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQDataSource;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQResultSequence;

/**
 * This class serves an example for executing XQuery requests
 * using the XQuery for Java (XQJ) API.
 *
 * @author Workgroup DBIS, University of Konstanz 2005-09,
 * ISC License
 * @author BaseX Team
 */
public final class XQJQuery {
  /** Database Driver. */
  private static final String DRIVER = 
  			"org.basex.api.xqj.BXQDataSource";
  /** Sample query. */
  private static final String QUERY = "doc('input.xml')//li";

  /**
   * Main method of the example class.
   * @param args (ignored) command-line arguments
   * @throws Exception exception
   */
  public static void main(final String[] args) throws Exception {
    // Gets the XQConnection for the specified Driver.
    final XQConnection conn = ((XQDataSource) Class.forName(DRIVER)
        .newInstance()).getConnection();

    // Prepares the Expression with the Document and the Query.
    final XQPreparedExpression expr = conn.prepareExpression(QUERY);

    // Executes the XQuery query.
    final XQResultSequence result = expr.executeQuery();

    // Gets all results of the execution.
    while(result.next()) {
      // Prints the results to the console.
      System.out.println(result.getItemAsString(null));
    }

    // Closes the expression.
    expr.close();
  }
}
]]>
</programlisting>
</para>
      </sect3>
    </sect2>
  </sect1>
</article>
